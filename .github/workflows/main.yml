name: CI

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest
    container:
      image: docker://barksim/bark:latest
    steps:
      - uses: actions/checkout@v1
      - name: Setting up virtual environment
        run: bash install.sh
      - name: Getting into venv
        run: . ./python/venv/bin/activate
      - name: Installing python dependencies
        run: pip3 install -r tools/installers/requirements.txt -q
      - name: Runing bazel test
        run: bazel test //...
